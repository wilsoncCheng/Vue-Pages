"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[79],{3079:function(t,e,s){s.r(e),s.d(e,{default:function(){return O}});var i=s(6252),h=s(3577);const o={id:"app"},a={class:"container"},n={class:"row py-3"},d={class:"col-md-12"},r={class:"text-end mt-4"},c={class:"table table-hover mt-4 text-center"},l=(0,i._)("thead",null,[(0,i._)("th",{width:"150"},"訂單時間"),(0,i._)("th",{width:"150"},"訂單編號"),(0,i._)("th",{width:"100"},"品項數量"),(0,i._)("th",{width:"100"},"總價"),(0,i._)("th",{width:"150"},"是否已付款"),(0,i._)("th",{width:"120"},"刪除")],-1),u={width:"150"},p={width:"150"},w={width:"100"},g={width:"100"},m={width:"150"},_={width:"120"},v=["onClick"];function k(t,e,s,k,b,$){const x=(0,i.up)("pagination");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",a,[(0,i._)("div",n,[(0,i._)("div",d,[(0,i._)("div",r,[(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=t=>$.delAllOrders())}," 完成所有訂單(千萬不要) ")]),(0,i._)("table",c,[l,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(b.orders,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id},[(0,i._)("th",u,(0,h.zw)(t.create_at),1),(0,i._)("th",p,(0,h.zw)(t.id),1),(0,i._)("th",w,(0,h.zw)(t.num),1),(0,i._)("th",g,(0,h.zw)(t.total),1),(0,i._)("th",m,(0,h.zw)(t.is_paid),1),(0,i._)("th",_,[(0,i._)("button",{type:"button",class:"btn btn-outline-danger",onClick:e=>$.delOrder(t.id)}," 完成 ",8,v)])])))),128))])]),(0,i.Wm)(x,{pages:t.pagination,onGetProduct:t.getData},null,8,["pages","onGetProduct"])])])])])}var b={data(){return{orders:{}}},methods:{checkadmin(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t;const e="https://vue3-course-api.hexschool.io/v2//api/user/check";this.$http.post(e).then((t=>{this.getOrders()})).catch((t=>{alert(t.data.message),window.location="index.html"}))},getOrders(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/wilsoncheng/orders").then((t=>{this.orders=t.data.orders,console.log(this.orders)}))},delOrder(t){const e=`https://vue3-course-api.hexschool.io/v2//api/wilsoncheng/admin/order/${t}`;this.$http.delete(e).then((t=>{this.emitter.emit("push-message",{style:"danger",title:"訂單已完成"}),this.getOrders()})).catch((t=>{alert(t.data.message)}))},delAllOrders(){const t="https://vue3-course-api.hexschool.io/v2//api/wilsoncheng/admin/orders/all";this.$http.delete(t).then((t=>{this.emitter.emit("push-message",{style:"danger",title:"所有訂單資料已刪除"}),this.getOrders()})).catch((t=>{alert(t.data.message)}))}},inject:["emitter"],mounted(){this.checkadmin()}},$=s(3744);const x=(0,$.Z)(b,[["render",k]]);var O=x}}]);
//# sourceMappingURL=79.ca4c0459.js.map