"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[990],{3990:function(t,e,s){s.r(e),s.d(e,{default:function(){return C}});var i=s(6252),h=s(9963),n=s(3577);const r={id:"app"},a={class:"container"},d={class:"row py-3"},o={class:"col-md-12"},l={class:"text-end mt-4"},c={class:"table table-hover mt-4 text-center"},u=(0,i._)("thead",null,[(0,i._)("th",{width:"150"},"訂單時間"),(0,i._)("th",{width:"150"},"訂單編號"),(0,i._)("th",{width:"100"},"品項數量"),(0,i._)("th",{width:"100"},"總價"),(0,i._)("th",{width:"150"},"是否已付款"),(0,i._)("th",{width:"120"},"刪除")],-1),p={width:"150"},w={width:"150"},m={width:"100"},g={width:"100"},_={width:"150"},v={key:0,class:"text-success"},b={key:1,class:"text-danger"},k={width:"120"},f=["onClick"];function x(t,e,s,x,$,y){return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("form",{onSubmit:e[0]||(e[0]=(0,h.iM)(((...e)=>t.submit&&t.submit(...e)),["prevent"])),class:"vld-parent",ref:"formContainer"},null,544),(0,i._)("div",a,[(0,i._)("div",d,[(0,i._)("div",o,[(0,i._)("div",l,[(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=t=>y.delAllOrders())}," 刪除所有訂單 ")]),(0,i._)("table",c,[u,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)($.orders,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id},[(0,i._)("th",p,(0,n.zw)(t.create_at),1),(0,i._)("th",w,(0,n.zw)(t.id),1),(0,i._)("th",m,(0,n.zw)(t.num),1),(0,i._)("th",g,(0,n.zw)(t.total),1),(0,i._)("th",_,[t.is_paid?((0,i.wg)(),(0,i.iD)("span",v,"已付款")):((0,i.wg)(),(0,i.iD)("span",b,"未完成"))]),(0,i._)("th",k,[(0,i._)("button",{type:"button",class:"btn btn-outline-danger",onClick:e=>y.delOrder(t.id)}," 刪除 ",8,f)])])))),128))])])])])])])}var $={data(){return{orders:{}}},methods:{checkadmin(){const t=this.$loading.show(),e=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=e;const s="https://vue3-course-api.hexschool.io/v2//api/user/check";this.$http.post(s).then((e=>{this.getOrders(),t.hide()})).catch((t=>{alert(t.response.data.message),window.location="index.html"}))},getOrders(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/wilsoncheng/orders").then((t=>{this.orders=t.data.orders}))},delOrder(t){const e=`https://vue3-course-api.hexschool.io/v2//api/wilsoncheng/admin/order/${t}`;this.$http.delete(e).then((t=>{this.emitter.emit("push-message",{style:"danger",title:"訂單已刪除"}),this.getOrders()})).catch((t=>{alert(t.response.data.message)}))},delAllOrders(){const t="https://vue3-course-api.hexschool.io/v2//api/wilsoncheng/admin/orders/all";this.$http.delete(t).then((t=>{this.emitter.emit("push-message",{style:"danger",title:"所有訂單已刪除"}),this.getOrders()})).catch((t=>{alert(t.response.data.message)}))}},inject:["emitter"],mounted(){this.checkadmin()}},y=s(3744);const O=(0,y.Z)($,[["render",x]]);var C=O}}]);
//# sourceMappingURL=990.740b0925.js.map