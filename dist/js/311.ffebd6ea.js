"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[311],{9311:function(t,s,e){e.r(s),e.d(s,{default:function(){return N}});var i=e(6252),o=e(9963),a=e(3577);const r={class:"container"},l={class:"row"},c={class:"col-lg-3 col-md-12 col-sm-12"},n={class:"list-group w-100 flex-direction-column text-center"},u={class:"row col-lg-9 row-cols-lg-4 row-col-md-3 col-sm-12 mg0-a"},d={class:"card h-100"},p={class:"position-absolute top-0_5 end-10"},h=["onClick"],g=(0,i._)("path",{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"},null,-1),m=[g],w=["onClick"],_=(0,i._)("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1),k=[_],C=["src"],v={class:"card-body"},f={class:"card-title"},b={class:"card-text mb-5"},P={class:"btn-group btn-group-sm btn-absolute mb-1"},y={class:"fas fa-spinner fa-pulse"},D=(0,i.Uk)(" 查看更多 "),z=["onClick"],x={class:"fas fa-spinner fa-pulse"},L=(0,i.Uk)(" 我想贊助 ");function $(t,s,e,g,_,$){const I=(0,i.up)("router-link"),M=(0,i.up)("PaginationTool");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("form",{onSubmit:s[0]||(s[0]=(0,o.iM)(((...s)=>t.submit&&t.submit(...s)),["prevent"])),class:"vld-parent",ref:"formContainer"},null,544),(0,i._)("div",l,[(0,i._)("div",c,[(0,i._)("div",n,[(0,i._)("a",{href:"#/products",class:(0,a.C_)(["list-group-item list-group-item-action",{active:_.products===_.showProducts}]),onClick:s[1]||(s[1]=t=>$.ChangeList("all"))},"全部("+(0,a.zw)(_.allProducts.length)+")",3),(0,i._)("a",{href:"#/products",class:"list-group-item list-group-item-action",onClick:s[2]||(s[2]=t=>$.ChangeList("校園"))},"校園("+(0,a.zw)(_.schoolProduct.length)+")",1),(0,i._)("a",{href:"#/products",class:"list-group-item list-group-item-action",onClick:s[3]||(s[3]=t=>$.ChangeList("自然"))},"自然("+(0,a.zw)(_.natureProduct.length)+")",1),(0,i._)("a",{href:"#/products",class:"list-group-item list-group-item-action",onClick:s[4]||(s[4]=t=>$.ChangeList("機械"))},"其他("+(0,a.zw)(_.othersProduct.length)+")",1)])]),(0,i._)("div",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(_.showProducts,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"pd-1 mb-2",key:t.id},[(0,i._)("div",d,[(0,i._)("label",p,[!1===t.like?((0,i.wg)(),(0,i.iD)("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart d-inline",onClick:s=>$.likeProduct(t),style:{cursor:"pointer"},viewBox:"0 0 16 16"},m,8,h)):((0,i.wg)(),(0,i.iD)("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill d-inline",onClick:s=>$.likeProduct(t),style:{cursor:"pointer"},viewBox:"0 0 16 16"},k,8,w))]),(0,i._)("img",{src:t.imageUrl,class:"card-img-top",alt:""},null,8,C),(0,i._)("div",v,[(0,i._)("h5",f,(0,a.zw)(t.title),1),(0,i._)("p",b,(0,a.zw)(t.description),1),(0,i._)("div",P,[(0,i.Wm)(I,{to:`/product/${t.id}`,class:"btn btn-outline-secondary"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("i",y,null,512),[[o.F8,_.productID===t.id]]),D])),_:2},1032,["to"]),(0,i._)("button",{type:"button",class:"btn btn-outline-danger",onClick:s=>$.addToCart(t.id)},[(0,i.wy)((0,i._)("i",x,null,512),[[o.F8,_.isLoadingItem===t.id]]),L],8,z)])])])])))),128))]),(0,i.Wm)(M)])])}const I={class:"pagination"},M=(0,i._)("span",{"aria-hidden":"true"},"«",-1),T=[M],E={key:0,class:"page-link"},U=["onClick"],j=(0,i._)("span",{"aria-hidden":"true"},"»",-1),B=[j];function F(t,s,e,r,l,c){return(0,i.wg)(),(0,i.iD)("ul",I,[(0,i._)("li",{class:(0,a.C_)(["page-item",{disabled:1===l.pages.current_page}])},[(0,i._)("a",{class:"page-link",href:"#/products","aria-label":"Previous",onClick:s[0]||(s[0]=(0,o.iM)((s=>c.pageChange(t.item-1)),["prevent"]))},T)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.pages.total_pages,((t,s)=>((0,i.wg)(),(0,i.iD)("li",{key:s,class:(0,a.C_)(["page-item",{active:t===l.pages.current_page}])},[t===l.pages.current_page?((0,i.wg)(),(0,i.iD)("span",E,(0,a.zw)(t),1)):((0,i.wg)(),(0,i.iD)("a",{key:1,onClick:(0,o.iM)((s=>c.pageChange(t)),["prevent"]),class:"page-link",href:"#/products"},(0,a.zw)(t),9,U))],2)))),128)),(0,i._)("li",{class:(0,a.C_)(["page-item",{disabled:l.pages.current_page===l.pages.total_pages}])},[(0,i._)("a",{class:"page-link",href:"#/products","aria-label":"Next",onClick:s[1]||(s[1]=(0,o.iM)((s=>c.pageChange(t.item+1)),["prevent"]))},B)],2)])}var H={data(){return{pages:{}}},inject:["emitter"],methods:{pageChange(t){this.emitter.emit("deliver-page_now",{page:t})}},mounted(){this.emitter.on("push-pagination",(t=>{this.pages=t.pages}))}},K=e(3744);const W=(0,K.Z)(H,[["render",F]]);var Y=W,Z={data(){return{products:[],cartData:{},isLoadingItem:"",productID:"",showProducts:[],allProducts:[],schoolProduct:[],natureProduct:[],othersProduct:[]}},components:{PaginationTool:Y},inject:["emitter"],methods:{begining(){const t=this.$loading.show();this.getProducts(),t.hide()},getProducts(t=1){const s=this.$loading.show();this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/wilsoncheng/products?page=${t}`).then((t=>{this.products=t.data.products,this.products.forEach((t=>{t.like=!1})),this.showProducts=this.products,this.allProducts=this.products,this.emitter.emit("push-pagination",{pages:t.data.pagination}),t.data.products.forEach((t=>{"校園"===t.category?this.schoolProduct.push(t):"自然"===t.category?this.natureProduct.push(t):this.othersProduct.push(t)}))})),s.hide()},likeProduct(t){!1===t.like?t.like=!0:t.like=!1},addToCart(t,s=1){const e={product_id:t,qty:s};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2//api/wilsoncheng/cart",{data:e}).then((t=>{this.isLoadingItem="",this.emitter.emit("push-message",{style:"success",title:"已經加入購物車"}),this.emitter.emit("get-cart",{})}))},ChangeList(t){const s=this.$loading.show();this.showProducts=[],"all"===t?this.showProducts=this.products:this.products.forEach((s=>{s.category===t&&this.showProducts.push(s)})),s.hide()}},mounted(){this.begining(),this.emitter.on("deliver-page_now",(t=>{this.getProducts(t.page)}))}};const q=(0,K.Z)(Z,[["render",$]]);var N=q}}]);
//# sourceMappingURL=311.ffebd6ea.js.map