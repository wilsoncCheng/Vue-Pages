"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[860],{5860:function(t,s,i){i.r(s),i.d(s,{default:function(){return K}});var e=i(6252),a=i(9963),o=i(3577);const n={class:"container"},r={class:"row"},c={class:"col-3"},l={class:"list-group",style:{"flex-direction":"column",width:"100%"}},p={class:"row col-9 row-cols-lg-4 row-cols-sm-3"},u={class:"card h-100"},d=["src"],g={class:"card-body"},h={class:"card-title"},m={class:"card-text mb-5"},_={class:"btn-group btn-group-sm btn-absolute mb-1"},w={class:"fas fa-spinner fa-pulse"},C=(0,e.Uk)(" 查看更多 "),k=["onClick"],v={class:"fas fa-spinner fa-pulse"},f=(0,e.Uk)(" 我想贊助 ");function b(t,s,i,b,y,D){const L=(0,e.up)("router-link"),I=(0,e.up)("PaginationTool");return(0,e.wg)(),(0,e.iD)("div",n,[(0,e._)("form",{onSubmit:s[0]||(s[0]=(0,a.iM)(((...s)=>t.submit&&t.submit(...s)),["prevent"])),class:"vld-parent",ref:"formContainer"},null,544),(0,e._)("div",r,[(0,e._)("div",c,[(0,e._)("div",l,[(0,e._)("a",{href:"#/products",class:(0,o.C_)(["list-group-item list-group-item-action",{active:y.products===y.listproducts}]),onClick:s[1]||(s[1]=t=>D.ChangeList("all"))},"全部",2),(0,e._)("a",{href:"#/products",class:"list-group-item list-group-item-action",onClick:s[2]||(s[2]=t=>D.ChangeList("校園"))},"校園"),(0,e._)("a",{href:"#/products",class:"list-group-item list-group-item-action",onClick:s[3]||(s[3]=t=>D.ChangeList("自然"))},"自然"),(0,e._)("a",{href:"#/products",class:"list-group-item list-group-item-action",onClick:s[4]||(s[4]=t=>D.ChangeList("機械"))},"其他")])]),(0,e._)("div",p,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(y.listproducts,(t=>((0,e.wg)(),(0,e.iD)("div",{class:"pd-1 mb-2",key:t.id},[(0,e._)("div",u,[(0,e._)("img",{src:t.imageUrl,class:"card-img-top",alt:""},null,8,d),(0,e._)("div",g,[(0,e._)("h5",h,(0,o.zw)(t.title),1),(0,e._)("p",m,(0,o.zw)(t.description),1),(0,e._)("div",_,[(0,e.Wm)(L,{to:`/product/${t.id}`,class:"btn btn-outline-secondary"},{default:(0,e.w5)((()=>[(0,e.wy)((0,e._)("i",w,null,512),[[a.F8,y.productID===t.id]]),C])),_:2},1032,["to"]),(0,e._)("button",{type:"button",class:"btn btn-outline-danger",onClick:s=>D.addToCart(t.id)},[(0,e.wy)((0,e._)("i",v,null,512),[[a.F8,y.isLoadingItem===t.id]]),f],8,k)])])])])))),128))]),(0,e.Wm)(I)])])}const y={class:"pagination"},D=(0,e._)("span",{"aria-hidden":"true"},"«",-1),L=[D],I={key:0,class:"page-link"},P=["onClick"],$=(0,e._)("span",{"aria-hidden":"true"},"»",-1),x=[$];function z(t,s,i,n,r,c){return(0,e.wg)(),(0,e.iD)("ul",y,[(0,e._)("li",{class:(0,o.C_)(["page-item",{disabled:1===r.pages.current_page}])},[(0,e._)("a",{class:"page-link",href:"#/products","aria-label":"Previous",onClick:s[0]||(s[0]=(0,a.iM)((s=>c.pageChange(t.item-1)),["prevent"]))},L)],2),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(r.pages.total_pages,((t,s)=>((0,e.wg)(),(0,e.iD)("li",{key:s,class:(0,o.C_)(["page-item",{active:t===r.pages.current_page}])},[t===r.pages.current_page?((0,e.wg)(),(0,e.iD)("span",I,(0,o.zw)(t),1)):((0,e.wg)(),(0,e.iD)("a",{key:1,onClick:(0,a.iM)((s=>c.pageChange(t)),["prevent"]),class:"page-link",href:"#/products"},(0,o.zw)(t),9,P))],2)))),128)),(0,e._)("li",{class:(0,o.C_)(["page-item",{disabled:r.pages.current_page===r.pages.total_pages}])},[(0,e._)("a",{class:"page-link",href:"#/products","aria-label":"Next",onClick:s[1]||(s[1]=(0,a.iM)((s=>c.pageChange(t.item+1)),["prevent"]))},x)],2)])}var M={data(){return{pages:{}}},inject:["emitter"],methods:{pageChange(t){this.emitter.emit("deliver-page_now",{page:t})}},mounted(){this.emitter.on("push-pagination",(t=>{this.pages=t.pages}))}},T=i(3744);const U=(0,T.Z)(M,[["render",z]]);var j=U,F={data(){return{products:[],cartData:{},listproducts:[],isLoadingItem:"",productID:""}},components:{PaginationTool:j},inject:["emitter"],methods:{getProducts(t=1){const s=this.$loading.show();this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/wilsoncheng/products?page=${t}`).then((t=>{this.products=t.data.products,this.listproducts=this.products,this.emitter.emit("push-pagination",{pages:t.data.pagination})})),s.hide()},addToCart(t,s=1){const i={product_id:t,qty:s};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2//api/wilsoncheng/cart",{data:i}).then((t=>{this.isLoadingItem="",this.emitter.emit("push-message",{style:"success",title:"已經加入購物車"}),this.emitter.emit("get-cart",{})}))},ChangeList(t){const s=this.$loading.show();this.listproducts=[],"all"===t?this.listproducts=this.products:this.products.forEach((s=>{s.category===t&&this.listproducts.push(s)})),s.hide()}},mounted(){this.getProducts(),this.emitter.on("deliver-page_now",(t=>{this.getProducts(t.page)}))}};const H=(0,T.Z)(F,[["render",b]]);var K=H}}]);
//# sourceMappingURL=860.eb055c6f.js.map