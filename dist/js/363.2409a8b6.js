"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[363],{1363:function(t,e,s){s.r(e),s.d(e,{default:function(){return q}});var i=s(6252),o=s(9963),a=s(3577);const r={class:"container"},c={class:"row"},l={class:"col-lg-3 col-md-12 col-sm-12"},n={class:"list-group w-100 flex-direction-column text-center"},d={class:"row col-lg-9 row-cols-lg-4 row-col-md-3 col-sm-12 mg0-a"},u={class:"card h-100"},p=["src"],h={class:"card-body"},g={class:"card-title"},w={class:"card-text mb-5 ellipsis"},m={class:"w-100 d-flex justify-content-between"},_={class:"top-0_5 end-10"},k=["onClick"],C=(0,i._)("path",{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"},null,-1),v=[C],P=["onClick"],b=(0,i._)("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1),f=[b],y=["onClick"],D={class:"spinner-grow spinner-grow-sm text-danger",role:"status"},x=(0,i.Uk)(" 我想贊助 ");function z(t,e,s,C,b,z){const L=(0,i.up)("router-link"),I=(0,i.up)("PaginationTool");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("form",{onSubmit:e[0]||(e[0]=(0,o.iM)(((...e)=>t.submit&&t.submit(...e)),["prevent"])),class:"vld-parent",ref:"formContainer"},null,544),(0,i._)("div",c,[(0,i._)("div",l,[(0,i._)("div",n,[(0,i._)("a",{href:"#/products",class:(0,a.C_)(["list-group-item list-group-item-action",{active:b.products===b.showProducts}]),onClick:e[1]||(e[1]=t=>z.ChangeList("all"))},"全部("+(0,a.zw)(b.allProducts.length)+")",3),(0,i._)("a",{href:"#/products",class:"list-group-item list-group-item-action",onClick:e[2]||(e[2]=t=>z.ChangeList("校園"))},"校園("+(0,a.zw)(b.schoolProduct.length)+")",1),(0,i._)("a",{href:"#/products",class:"list-group-item list-group-item-action",onClick:e[3]||(e[3]=t=>z.ChangeList("自然"))},"自然("+(0,a.zw)(b.natureProduct.length)+")",1),(0,i._)("a",{href:"#/products",class:"list-group-item list-group-item-action",onClick:e[4]||(e[4]=t=>z.ChangeList("機械"))},"其他("+(0,a.zw)(b.othersProduct.length)+")",1)])]),(0,i._)("div",d,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(b.showProducts,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"pd-1 mb-2",key:t.id},[(0,i._)("div",u,[(0,i.Wm)(L,{to:`/product/${t.id}`},{default:(0,i.w5)((()=>[(0,i._)("img",{src:t.imageUrl,class:"card-img-top",alt:""},null,8,p)])),_:2},1032,["to"]),(0,i._)("div",h,[(0,i._)("h5",g,(0,a.zw)(t.title),1),(0,i._)("p",w,(0,a.zw)(t.description),1),(0,i._)("div",m,[(0,i._)("label",_,[!1===t.like?((0,i.wg)(),(0,i.iD)("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart d-inline text-danger",onClick:e=>z.likeProduct(t),style:{cursor:"pointer"},viewBox:"0 0 16 16"},v,8,k)):((0,i.wg)(),(0,i.iD)("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill d-inline text-danger",onClick:e=>z.likeProduct(t),style:{cursor:"pointer"},viewBox:"0 0 16 16"},f,8,P))]),(0,i._)("button",{type:"button",class:(0,a.C_)(["btn btn-outline-danger",{disabled:b.buyProductID===t.id}]),onClick:e=>z.addToCart(t.id)},[(0,i.wy)((0,i._)("div",D,null,512),[[o.F8,b.buyProductID===t.id]]),x],10,y)])])])])))),128))]),(0,i.Wm)(I)])])}const L={class:"pagination"},I=(0,i._)("span",{"aria-hidden":"true"},"«",-1),M=[I],$={key:0,class:"page-link"},T=["onClick"],j=(0,i._)("span",{"aria-hidden":"true"},"»",-1),E=[j];function B(t,e,s,r,c,l){return(0,i.wg)(),(0,i.iD)("ul",L,[(0,i._)("li",{class:(0,a.C_)(["page-item",{disabled:1===c.pages.current_page}])},[(0,i._)("a",{class:"page-link",href:"#/products","aria-label":"Previous",onClick:e[0]||(e[0]=(0,o.iM)((e=>l.pageChange(t.item-1)),["prevent"]))},M)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.pages.total_pages,((t,e)=>((0,i.wg)(),(0,i.iD)("li",{key:e,class:(0,a.C_)(["page-item",{active:t===c.pages.current_page}])},[t===c.pages.current_page?((0,i.wg)(),(0,i.iD)("span",$,(0,a.zw)(t),1)):((0,i.wg)(),(0,i.iD)("a",{key:1,onClick:(0,o.iM)((e=>l.pageChange(t)),["prevent"]),class:"page-link",href:"#/products"},(0,a.zw)(t),9,T))],2)))),128)),(0,i._)("li",{class:(0,a.C_)(["page-item",{disabled:c.pages.current_page===c.pages.total_pages}])},[(0,i._)("a",{class:"page-link",href:"#/products","aria-label":"Next",onClick:e[1]||(e[1]=(0,o.iM)((e=>l.pageChange(t.item+1)),["prevent"]))},E)],2)])}var H={data(){return{pages:{}}},inject:["emitter"],methods:{pageChange(t){this.emitter.emit("deliver-page_now",{page:t})}},mounted(){this.emitter.on("push-pagination",(t=>{this.pages=t.pages}))}},K=s(3744);const U=(0,K.Z)(H,[["render",B]]);var W=U,Y={data(){return{products:[],cartData:{},isLoadingItem:"",buyProductID:"",showProducts:[],allProducts:[],schoolProduct:[],natureProduct:[],othersProduct:[]}},components:{PaginationTool:W},inject:["emitter"],methods:{getProducts(t=1){const e=this.$loading.show();this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/wilsoncheng/products?page=${t}`).then((t=>{this.products=t.data.products,this.products.forEach((t=>{t.like=!1})),this.showProducts=this.products,this.allProducts=this.products,this.emitter.emit("push-pagination",{pages:t.data.pagination}),t.data.products.forEach((t=>{"校園"===t.category?this.schoolProduct.push(t):"自然"===t.category?this.natureProduct.push(t):this.othersProduct.push(t)})),e.hide()}))},likeProduct(t){!1===t.like?t.like=!0:t.like=!1},addToCart(t,e=1){this.buyProductID=t;const s={product_id:t,qty:e};this.$http.post("https://vue3-course-api.hexschool.io/v2//api/wilsoncheng/cart",{data:s}).then((t=>{this.emitter.emit("push-message",{style:"success",title:"已經加入購物車"}),this.emitter.emit("get-cart",{}),this.buyProductID=""}))},ChangeList(t){const e=this.$loading.show();this.showProducts=[],"all"===t?this.showProducts=this.products:this.products.forEach((e=>{e.category===t&&this.showProducts.push(e)})),e.hide()}},mounted(){this.getProducts(),this.emitter.on("deliver-page_now",(t=>{this.getProducts(t.page)}))}};const Z=(0,K.Z)(Y,[["render",z]]);var q=Z}}]);
//# sourceMappingURL=363.2409a8b6.js.map